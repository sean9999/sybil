name: sybil
base: core18
version: 'v0.0.2'
summary: Manage LUKS-encryped devices or folders with a Yubikey
description: |
  Sybil allows you to enroll one or more yubikeys to authenticate a LUKS-encryped device.
  It does so by saving a randomly-generated challenge to disk,
  and the resultant HMAC challenge to a slot in the LUKS device.
type: app
grade: devel
confinement: devmode # use 'strict' once you have the right plugs and slots

apps:
  sybil:
    command: opt/fukt/sybil/sybil

parts:
  sybil:
    plugin: dump
    source: source
    organize:
      "scripts": "/opt/fukt/sybil"
    stage-packages:
      - yubikey-personalization

